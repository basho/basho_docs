<!-- Variable Definitions
   ====================
  This partial should be invoked with a dict containing the below members,
    "node"       :: The Hugo node that started the sub-menu recursion.
    "menu_title" :: The title of the menu to render (ex; "riak_kv-2.1.4",
                    "community")

{{ $HugoNode   := .node       }}
{{ $menu_title := .menu_title }}
{{ $menu_list  := (index $HugoNode.Site.Menus $menu_title) }} {{/* GoLang List of Menu Objects */}}

{{ $project := $HugoNode.Scratch.Get "project" }}
{{ $version := $HugoNode.Scratch.Get "version" }}
-->

{{/* This check is required to correctly know the hight of the top element. */}}
{{ if ( and $project $version ) }}
<nav class="content-nav content-nav--top-size-full">
{{ else }}
<nav class="content-nav content-nav--top-size-half">
{{ end }}



  <div class="content-nav__fixed-top">
    <form class="search">

      <span class="block float-left   search__icon-container   docs-icon--search">|</span>

      <span class="block overflow">
        <input class="search__input" id="primary-search" type="search" name="search" placeholder="Search">
      </span>

    </form>

{{ if ( and $project $version ) }}
    <div class="clearfix   selectors">

      <div class="inline-block float-left    selector selector--project">
        <header class="selector__title">Projects</header>
        <button class="selector__btn" type="button">{{ $project | title }}</button>
        <div    class="selector__arrow"></div>
      </div>

      <div class="inline-block float-right   selector selector--version">
        <header class="selector__title">Versions</header>
        <button class="selector__btn" type="button">{{$version}}</button>
        <div    class="selector__arrow"></div>
      </div>

    </div>
{{ end }}

  </div>



  <!-- This shadow box exists s.t. the scroll bar for the dynamic primary
       content isn't offset by the size of the box-shadow applied. -->
  <div class="content-nav__shadow-box">
    <div class="overflow-y   content-nav__primary">

      <div class="content-nav__menu-container">

        <ul class="content-menu
                   content-menu--depth-0
                   content-menu--open">

{{- range $menu := $menu_list }}

<!-- Range-Specific Variable Definitions
     ===================================
{{ $menu_is_selected       := ($HugoNode.IsMenuCurrent  $menu_title $menu)     }} {{/* If the current menu is selected            */}}
{{ $menu_contains_selected := ($HugoNode.HasMenuCurrent $menu_title $menu)     }} {{/* If a child of the current menu is selected */}}
{{ $menu_is_open           := (or  $menu_is_selected  $menu_contains_selected) }}
{{ $menu_pre_icon          := $menu.Pre                                        }} {{/* User defined. ex; lambda */}}
{{ $menu_has_children      := $menu.HasChildren                                }} {{/* Provided by Hugo         */}}
{{ $menu_name              := $menu.Name                                       }} {{/* Provided by Hugo         */}}
{{ $menu_url               := $menu.URL                                        }} {{/* Provided by Hugo         */}}
-->
          <li>

            <div class="content-menu__item {{if $menu_is_selected }} content-menu__item--selected {{end}}">

              <span class="block float-left   content-menu__icon-container   docs-icon--{{$menu_pre_icon}}">|</span>

  {{- if $menu_has_children }}
              <span class="block float-right   content-menu__menu-toggle
                          {{if $menu_is_open}} content-menu__menu-toggle--open {{end}}">
              </span>
  {{- end }}

              <a class="block overflow" {{if not $menu_is_selected}} href="{{$menu_url}}" {{end}}>
                <strong>{{$menu_name}}</strong>
              </a>

            </div>

  {{- if $menu_has_children }}
          {{ $dict := (dict   "node" $HugoNode   "top_menu" $menu   "menu_title" $menu_title   "menu_depth" 1   "menu_is_open" $menu_is_open) }}
          {{ partial "content_navigation_submenu.html" $dict }}
  {{- end }}

          </li>

{{- end }}

        </ul>

      </div>



      <div class="content-nav__fixed-bottom">

        <span class="block" style="text-align:center;">
          This is the fixed bottom
        </span>

      </div>

    </div>
  </div>



</nav>
